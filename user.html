<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Development Area</title>
    <!-- ALL CSS FILES  -->
    <link rel="stylesheet" href="assets/css/bootstrap.min.css" />
    <link rel="stylesheet" href="assets/css/style.css" />
    <link rel="stylesheet" href="assets/css/all.min.css" />
    <link rel="stylesheet" href="assets/css/responsive.css" />
  </head>
  <body>
    <div id="root">
      <div class="wrap-table">
        <a
          class="btn btn-primary btn-sm mb-2"
          data-toggle="modal"
          href="#add_new_user"
          >Add new user</a
        >
        <div class="card shadow">
          <div class="card-body">
            <h2>All Data</h2>
            <table class="table table-striped">
              <thead>
                <tr>
                  <th>#</th>
                  <th>Name</th>
                  <th>Email</th>
                  <th>Cell</th>
                  <th>Photo</th>
                  <th>Action</th>
                </tr>
              </thead>
              <tbody>
                <tr v-for="(user, i) in users">
                  <td>{{ i+1 }}</td>
                  <td>{{ user.name }}</td>
                  <td>{{ user.email }}</td>
                  <td>{{ user.cell }}</td>
                  <td>
                    <img
                      src="assets/media/img/pp_photo/istockphoto-615279718-612x612.jpg"
                      alt=""
                    />
                  </td>
                  <td>
                    <a class="btn btn-sm btn-info" href="#">View</a>
                    <a class="btn btn-sm btn-warning" href="#">Edit</a>
                    <a class="btn btn-sm btn-danger" href="#">Delete</a>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
      <!-- User add modal -->
      <div id="add_new_user" class="modal fade">
        <div class="modal-dialog modal-dialog-centered">
          <div class="modal-content">
            <div class="modal-header">
              <h2>Add New User</h2>
              <button class="close" data-dismiss="modal">&times;</button>
            </div>
            <div class="modal-body">
              <form action="">
                <div class="form-group">
                  <label for="">Name</label>
                  <input
                    v-model="add.name"
                    type="text"
                    class="form-control"
                    placeholder="Name"
                  />
                </div>
                <div class="form-group">
                  <label for="">Email</label>
                  <input
                    v-model="add.email"
                    type="email"
                    class="form-control"
                    placeholder="Email"
                  />
                </div>
                <div class="form-group">
                  <label for="">Cell</label>
                  <input
                    v-model="add.cell"
                    type="text"
                    class="form-control"
                    placeholder="Cell"
                  />
                </div>
                <div class="form-group">
                  <label for="user_photo" style="margin-right: 90px"
                    ><i class="fas fa-file-image text-info fa-5x"></i
                  ></label>
                  <input
                    type="file"
                    class="form-control-file"
                    style="display: none"
                    id="user_photo"
                    @change="addPhoto($event)"
                  />
                  <img :src="add.photo" style="width: 200px" alt="" />
                </div>
                <div class="form-group">
                  <button
                    type="submit"
                    class="btn btn-sm btn-block btn-success mt-5"
                  >
                    Add User
                  </button>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- JS FILES  -->
    <script src="assets/js/jquery-3.4.1.min.js"></script>
    <script src="assets/js/popper.min.js"></script>
    <script src="assets/js/bootstrap.min.js"></script>
    <script src="assets/js/all.min.js"></script>
    <script src="assets/js/custom.js"></script>

    <!-- Vue js Script -->
    <script src="assets/js/vue.js"></script>
    <script src="assets/js/axios.min.js"></script>

    <!-- Vue js instance create -->
    <script>
      const root = new Vue({
        el: "#root",
        data: {
          users: {
            name: "",
            email: "",
            cell: "",
            photo: "",
          },
          add: {
            name: "",
            email: "",
            cell: "",
            photo: "",
          },
        },
        methods: {
          getAllUsers: function () {
            axios.get("inc/user.php?action=read").then(function (response) {
              console.log(response.data);
              root.users = response.data;
            });
          },
          addPhoto: function (event) {
            let user_photo = URL.createObjectURL(event.target.files[0]);
            root.add.photo = user_photo;
          },
        },
        created() {
          this.getAllUsers();
        },
      });
    </script>
  </body>
</html>
